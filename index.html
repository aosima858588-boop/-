<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·è±šæ¨¡å¼ Â· åŠ¨æ€ä¿®æ­£ç‰ˆ</title>
    <style>
        * { font-family: system-ui, sans-serif; box-sizing: border-box; }
        body { background: #0b0d10; display: flex; justify-content: center; padding: 16px; }
        .phone { max-width: 390px; width: 100%; background: #0f1215; border-radius: 40px; padding: 20px; color: white; }
        .card { background: rgba(20,24,30,0.8); border-radius: 28px; padding: 20px; margin-bottom: 20px; }
        .title { font-size: 18px; margin-bottom: 16px; color: #b0c6ff; }
        .slider-container { margin: 20px 0; }
        input[type=range] { width: 100%; }
        .result-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #222; }
        .highlight { color: #ffd966; font-weight: bold; }
    </style>
</head>
<body>
    <div class="phone">
        <h2 style="margin-bottom: 8px;">ğŸ¬ æµ·è±šåŠ¨æ€æ¨æ¼”</h2>
        <div class="card">
            <div class="title">ğŸ”¹ è”åˆæ›²çº¿æ¨¡æ‹Ÿ (æ’å®šä¹˜ç§¯)</div>
            <div class="slider-container">
                <label>ä¹°å…¥ USDT é‡: <span id="buyVal">100,000</span></label>
                <input type="range" id="buySlider" min="1000" max="300000" value="100000" step="1000">
            </div>
            <div id="calcResult">
                <div class="result-row"><span>æ¶ˆè€— H æ•°é‡</span> <span class="highlight" id="hOut">-</span></div>
                <div class="result-row"><span>æ–°æ±  H å‚¨å¤‡</span> <span id="newH">-</span></div>
                <div class="result-row"><span>æ–°æ±  USDT</span> <span id="newU">-</span></div>
                <div class="result-row"><span>æ–°ä»·æ ¼</span> <span id="newPrice">-</span></div>
                <div class="result-row"><span>æ¶¨å¹…</span> <span id="incPct">-</span></div>
                <div class="result-row"><span>ç¨è´¹ (5%)</span> <span id="tax">-</span></div>
                <div class="result-row"><span>è¿”ä½£ (0.34%)</span> <span id="rebate">-</span></div>
            </div>
        </div>
        <p style="color:#aaa;font-size:12px;">æ‹–åŠ¨æ»‘å—ï¼Œæ‰€æœ‰æ•°æ®åº”å®æ—¶å˜åŒ–ã€‚å¦‚æœä»ä¸åŠ¨ï¼Œè¯·æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ã€‚</p>
    </div>
    <script>
        (function() {
            // å›ºå®šåˆå§‹æ± çŠ¶æ€ (ç¬¬äºŒé˜¶æ®µå: ç¤¾åŒºä¹°å…¥10ä¸‡Uä¹‹å)
            const poolH = 18181818.18;      // 18.18M H
            const poolU = 110000;           // 110,000 USDT
            const k = poolH * poolU;        // æ’å®šä¹˜ç§¯ â‰ˆ 2e12

            // è·å–å…ƒç´ 
            const slider = document.getElementById('buySlider');
            const buySpan = document.getElementById('buyVal');
            const hOutSpan = document.getElementById('hOut');
            const newHSpan = document.getElementById('newH');
            const newUSpan = document.getElementById('newU');
            const newPriceSpan = document.getElementById('newPrice');
            const incPctSpan = document.getElementById('incPct');
            const taxSpan = document.getElementById('tax');
            const rebateSpan = document.getElementById('rebate');

            // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
            console.log('slider:', slider, 'buySpan:', buySpan); // è°ƒè¯•ç”¨

            function update(buyU) {
                buyU = parseFloat(buyU);
                if (isNaN(buyU)) buyU = 0;

                // è®¡ç®—
                let newU = poolU + buyU;
                let newH = k / newU;
                let hOut = poolH - newH;
                let newPrice = newU / newH;
                let oldPrice = poolU / poolH;
                let inc = (newPrice - oldPrice) / oldPrice * 100;
                let tax = buyU * 0.05;
                let rebate = buyU * 0.0034;

                // æ ¼å¼åŒ–æ˜¾ç¤º
                buySpan.innerText = Math.round(buyU).toLocaleString();
                hOutSpan.innerText = Math.round(hOut).toLocaleString();
                newHSpan.innerText = Math.round(newH).toLocaleString() + ' H';
                newUSpan.innerText = Math.round(newU).toLocaleString() + ' USDT';
                newPriceSpan.innerText = '$' + newPrice.toFixed(6);
                incPctSpan.innerText = (inc > 0 ? '+' : '') + inc.toFixed(2) + '%';
                taxSpan.innerText = Math.round(tax).toLocaleString() + ' USDT';
                rebateSpan.innerText = Math.round(rebate).toLocaleString() + ' USDT';

                // æ§åˆ¶å°è¾“å‡ºï¼Œæ–¹ä¾¿æŸ¥çœ‹
                console.log('ä¹°å…¥:', buyU, 'æ–°ä»·:', newPrice);
            }

            // ç›‘å¬æ»‘å—
            slider.addEventListener('input', function(e) {
                update(e.target.value);
            });

            // åˆå§‹åŒ–
            update(slider.value);
        })();
    </script>
</body>
</html>